<?phpclass team{	private $curl;		public function __construct()	{		global $gGlobalConfig;		include_once (ROOT_PATH . 'lib/class/curl.class.php');		$this->curl = new curl($gGlobalConfig['App_team']['host'], $gGlobalConfig['App_team']['dir']);	}		public function __destruct()	{		unset($this->curl);	}		public function show($count=-1,$offset=0)	{		if(!$this->curl)		{			return array();		}		$this->curl->setSubmitType('get');			$this->curl->initPostData();		$this->curl->addRequestData('count', $count);		$this->curl->addRequestData('offset', $offset);		$this->curl->addRequestData('a', 'show');		$result = $this->curl->request('team.php');		return $result;	}		public function show_topic($count=-1,$offset=0)	{		if(!$this->curl)		{			return array();		}		$this->curl->setSubmitType('get');			$this->curl->initPostData();		$this->curl->addRequestData('count', $count);		$this->curl->addRequestData('offset', $offset);		$this->curl->addRequestData('a', 'show');		$result = $this->curl->request('topic.php');		return $result;	}	/**	 * 获取单个小组信息	 * @param Int $team_id	 */	public function get_one_team($team_id)	{		if(!$this->curl)		{			return array();		}		$this->curl->setSubmitType('get');			$this->curl->initPostData();		$this->curl->addRequestData('team_id', $team_id);		$this->curl->addRequestData('a', 'detail');		$result = $this->curl->request('team.php');		return $result[0];	}		/**	 * 根据ID获取小组信息	 * @param String $team_ids	 */	public function get_team_by_id($team_ids)	{		$this->curl->setSubmitType('get');			$this->curl->initPostData();		$this->curl->addRequestData('team_ids', $team_ids);		$this->curl->addRequestData('a', 'get_team_by_id');		$result = $this->curl->request('team.php');		return $result;	}		/**	 * 根据ID获取小组话题信息	 * @param String $topic_ids	 */	public function get_topic_by_id($topic_ids)	{		$this->curl->setSubmitType('get');			$this->curl->initPostData();		$this->curl->addRequestData('topic_ids', $topic_ids);		$this->curl->addRequestData('a', 'get_topic_by_id');		$result = $this->curl->request('topic.php');		return $result;	}		/**	 * 获取权限信息	 * @param Int $team_id 小组的ID	 * @param Int $user_id 不转默认获取当前登录的用户	 * @param String $permission 不传默认返回全部权限判断	 */	public function get_permission($team_id, $user_id, $permission = '')	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('team_id', $team_id);		$this->curl->addRequestData('user_id', $user_id);		$this->curl->addRequestData('permission', $permission);		$this->curl->addRequestData('a', 'get_permission');		$ret = $this->curl->request('team.php');		return $ret[0];	}		/**	 * 更新小组统计信息	 * @param Array $data	 */	public function update_total($data)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		foreach ($data as $k=>$v)		{			$this->curl->addRequestData($k, $v);		}		$this->curl->addRequestData('a', 'update_total');		$ret = $this->curl->request('team_update.php');		return $ret[0];	}		/**	 * 更新话题查看数	 * @param Array $data	 */	public function update_topic_views($data)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		foreach ($data as $k=>$v)		{			$this->curl->addRequestData($k, $v);		}		$this->curl->addRequestData('a', 'update_total');		$ret = $this->curl->request('topic_update.php');		return $ret[0];	}		public function show_video($sid,$source,$offset=0,$count=20)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('sid', $sid);		$this->curl->addRequestData('source', $source);		$this->curl->addRequestData('offset', $offset);		$this->curl->addRequestData('count', $count);		$this->curl->addRequestData('a', 'show');		$ret = $this->curl->request('video.php');		return $ret[0];	}		public function add_video($url,$source,$sid)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('url', $url);		$this->curl->addRequestData('source', $source);		$this->curl->addRequestData('sid', $sid);		$this->curl->addRequestData('a', 'create');		$ret = $this->curl->request('video_update.php');		return $ret[0];	}		public function update_video($video_id,$url,$source,$sid)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('url', $url);		$this->curl->addRequestData('source', $source);		$this->curl->addRequestData('sid', $sid);		$this->curl->addRequestData('id', $video_id);		$this->curl->addRequestData('a', 'update');		$ret = $this->curl->request('video_update.php');		return $ret[0];			}		/**	 * 删除小组的话题	 * @param String $topic_id	 */	public function del_all($team_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('team_id', $team_id);		$this->curl->addRequestData('a', 'real_del_topic');		$ret = $this->curl->request('admin/topic_update.php');		return $ret[0];	}		/**	 * 删除小组	 * @param Int|String $team_id	 */	public function delete_team($team_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('team_id', $team_id);		$this->curl->addRequestData('a', 'real_del');		$ret = $this->curl->request('admin/team_update.php');		return $ret[0];	}		/**	 * 逻辑删除小组	 * @param Int|String $team_id	 */	public function drop_team($team_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('team_id', $team_id);		$this->curl->addRequestData('a', 'delete');		$ret = $this->curl->request('admin/team_update.php');		return $ret[0];	}		/**	 * 恢复小组	 * @param Int|String $team_id	 */	public function recover_team($team_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('team_id', $team_id);		$this->curl->addRequestData('a', 'recover');		$ret = $this->curl->request('admin/team_update.php');		return $ret[0];	}		/**	 * 删除话题	 * @param Int|String $topic_id	 */	public function delete_topic($topic_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('topic_id', $topic_id);		$this->curl->addRequestData('a', 'real_del');		$ret = $this->curl->request('admin/topic_update.php');		return $ret[0];	}		/**	 * 逻辑删除话题	 * @param Int|String $topic_id	 */	public function drop_topic($topic_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('topic_id', $topic_id);		$this->curl->addRequestData('a', 'delete');		$ret = $this->curl->request('admin/topic_update.php');		return $ret[0];	}		/**	 * 恢复话题	 * @param Int|String $topic_id	 */	public function recover_topic($topic_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('topic_id', $topic_id);		$this->curl->addRequestData('a', 'recover');		$ret = $this->curl->request('admin/topic_update.php');		return $ret[0];	}		/**	 * 逻辑删除回复	 * @param Int|String $reply_id	 */	public function drop_reply($reply_id)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('rid', $reply_id);		$this->curl->addRequestData('a', 'drop_reply');		$ret = $this->curl->request('admin/topic_update.php');		return $ret[0];	}		public function delete_visit($cid,$source)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('cid', $cid);		$this->curl->addRequestData('source', $source);		$this->curl->addRequestData('a', 'delete');		$ret = $this->curl->request('admin/visit_update.php');		return $ret[0];			}		/*	*source "user,action,team,topic"	*	*/	public function add_search($id,$source)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('id', $id);		$this->curl->addRequestData('source', $source);		$this->curl->addRequestData('a', 'create');		$ret = $this->curl->request('admin/search_queue.php');		return $ret[0];		}		public function update_search($id,$source)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('id', $id);		$this->curl->addRequestData('source', $source);		$this->curl->addRequestData('a', 'update');		$ret = $this->curl->request('admin/search_queue.php');		return $ret[0];				}		public function delete_search($id,$source)	{		$this->curl->setSubmitType('get');		$this->curl->initPostData();		$this->curl->addRequestData('id', $id);		$this->curl->addRequestData('source', $source);		$this->curl->addRequestData('a', 'delete');		$ret = $this->curl->request('admin/search_queue.php');		return $ret[0];				}}