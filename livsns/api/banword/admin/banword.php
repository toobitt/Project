<?php/**************************************************************************** LivSNS 0.1* (C)2004-2010 HOGE Software.** $Id: banword.php 16491 2013-01-08 06:01:19Z yaojian $***************************************************************************/require_once './global.php';require_once CUR_CONF_PATH . 'lib/banword.class.php';define('MOD_UNIQUEID', 'banword'); //模块标识class banwordApi extends adminReadBase{	private $banword;		public function __construct()	{		$this->mPrmsMethods = array(			'manage' => '管理',		);			parent::__construct();		$this->banword = new banwordClass();	}	public function __destruct()	{		parent::__destruct();		unset($this->banword);	}		public function index() {}		/**	 * 屏蔽字列表	 */	public function show()	{		//权限验证		$this->verify_content_prms(array('_action' => 'manage'));		$offset = isset($this->input['offset']) ? intval($this->input['offset']) : 0;		$count = isset($this->input['count']) ? intval($this->input['count']) : 20;		$condition = $this->get_condition();		$banword_info = $this->banword->show($offset, $count, $condition);		$this->setXmlNode('banword_info', 'banword');		if ($banword_info)		{			foreach ($banword_info as $banword)			{				$this->addItem($banword);			}		}		$this->output();	}		/**	 * 屏蔽字数据总数	 */	public function count()	{		$condition = $this->get_condition();		$info = $this->banword->count($condition);		echo json_encode($info);	}		public function detail() {}		/**	 * 查询条件	 * @param Array $data	 */	private function get_condition()	{			return array(			'key' => trim(urldecode($this->input['key'])),		);	}}$out = new banwordApi();$action = $_INPUT['a'];if (!method_exists($out, $action)){	$action = 'show';}$out->$action();?>