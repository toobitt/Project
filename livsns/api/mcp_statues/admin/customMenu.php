<?php/**************************************************************************** LivSNS 0.1* (C)2004-2010 HOGE Software.** $Id: customMenu.php 12433 2012-10-11 09:59:16Z yaojian $***************************************************************************/require_once './global.php';require_once CUR_CONF_PATH . 'lib/menu.class.php';define('MOD_UNIQUEID', 'customMenu'); //模块标识class customMenuApi extends adminReadBase{	private $menu;	private $userId;		public function __construct()	{		parent::__construct();		$this->menu = new menu();		$this->get_user_id();	}		public function __destruct()	{		parent::__destruct();		unset($this->menu);		unset($this->userId);	}		public function index()	{			}		/**	 * 获取用户ID	 */	private function get_user_id()	{		if (isset($this->input['uid']))		{			$this->userId = intval($this->input['uid']);		}else {			$this->userId = intval($this->user['user_id']);		}	}		/**	 * 获取自定义快捷菜单信息	 */	public function show()	{		//检测是否有自定义菜单		//$verify = $this->menu->check_custom_menu($this->userId);		//if (!$verify) $this->output();		$offset = isset($this->input['offset']) ? intval($this->input['offset']) : 0;		$count = isset($this->input['count']) ? intval($this->input['count']) : 20;		$menus = $this->menu->getCustomMenus($this->userId, $offset, $count);		$this->setXmlNode('menu_info', 'menu');		if (!empty($menus))		{			foreach($menus as $menu)			{				$this->addItem($menu);			}		}		$this->output();	}		/**	 * 获取自定义菜单数目	 */	public function count()	{		$info = $this->menu->getCustomMenusCount($this->userId);		$this->addItem($info);		$this->output();	}		public function detail()	{			}		/**	 * 获取全部菜单信息	 */	public function get_all_custom_menus()	{		$offset = isset($this->input['offset']) ? intval($this->input['offset']) : 0;		$count = isset($this->input['count']) ? intval($this->input['count']) : 20;		$menus = $this->menu->getAllCustomMenus($this->userId, $offset, $count);		$this->setXmlNode('menu_info', 'menu');		if (!empty($menus))		{			foreach($menus as $menu)			{				$this->addItem($menu);			}		}		$this->output();	}}$out = new customMenuApi();$action = $_INPUT['a'];if (!method_exists($out,$action)){	$action = 'show';}$out->$action();?>