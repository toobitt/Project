<?php/**************************************************************************** LivSNS 0.1* (C)2004-2010 HOGE Software.** $Id: customMenu_update.php 12433 2012-10-11 09:59:16Z yaojian $***************************************************************************/require_once './global.php';require_once CUR_CONF_PATH . 'lib/menu.class.php';define('MOD_UNIQUEID', 'customMenu'); //模块标识class customMenuUpdateApi extends adminUpdateBase{	private $menu;	private $userId;		public function __construct()	{		parent::__construct();		$this->menu = new menu();		$this->get_user_id();	}		public function __destruct()	{		parent::__destruct();		unset($this->menu);		unset($this->userId);	}		/**	 * 获取用户ID	 */	private function get_user_id()	{		if (isset($this->input['uid']))		{			$this->userId = intval($this->input['uid']);		}else {			$this->userId = intval($this->user['user_id']);		}	}		/**	 * 添加自定义菜单	 */	public function create()	{		$menu_id = isset($this->input['menu_id']) ? trim(urldecode($this->input['menu_id'])) : '';		if (empty($menu_id)) $this->errorOutput(PARAM_WRONG);		if (!strpos($menu_id, ',')) $menu_id = intval($menu_id);		$result = $this->menu->addCustomMenus($this->userId, $menu_id);		$this->addItem($result);		$this->output();	}		/**	 * 删除自定义菜单	 */	public function delete()	{		$menu_id = isset($this->input['menu_id']) ? trim(urldecode($this->input['menu_id'])) : '';		if (empty($menu_id)) $this->errorOutput(PARAM_WRONG);		if (!strpos($menu_id, ',')) $menu_id = intval($menu_id);		$result = $this->menu->updateCustomMenus(array('is_del' => 1), $this->userId, $menu_id);		$this->addItem($result);		$this->output();	}		public function audit()	{			}		public function publish()	{			}		public function sort()	{			}		public function update()	{			}		/**	 * 方法不存在的时候调用的方法	 */	public function none()	{		$this->errorOutput('调用的方法不存在');	}}$out = new customMenuUpdateApi();$action = $_INPUT['a'];if (!method_exists($out,$action)){	$action = 'none';}$out->$action();?>