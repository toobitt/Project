<?php/**************************************************************************** LivSNS 0.1* (C)2004-2010 HOGE Software.** $Id: program_record.php 7586 2012-07-05 09:40:56Z repheal $***************************************************************************/require('global.php');define('MOD_UNIQUEID','program_library');//模块标识class libraryTypeApi extends adminReadBase{	private $obj;		public function __construct()	{		parent::__construct();		include(CUR_CONF_PATH . 'lib/library.class.php');		$this->obj = new library();	}	public function __destruct()	{		parent::__destruct();		unset($this->obj);	}		/**	 * 获取所有类型数据	 */	public function show()	{		$offset = isset($this->input['offset']) ? intval($this->input['offset']) : 0;					$count = isset($this->input['count']) ? intval($this->input['count']) : -1;		$condition = $this->get_condition();		$type_info = $this->obj->show_type($offset, $count, $condition);		$this->setXmlNode('type_info', 'type');		if ($type_info)		{			foreach ($type_info as $type)			{				$this->addItem($type);			}		}		$this->output();	}		/**	 * 获取所有数据总数	 */	public function count()	{		$condition = $this->get_condition();		$info = $this->obj->count_type($condition);		echo json_encode($info);	}		/**	 * 获取单个类型数据	 */	public function detail()	{		$tid = isset($this->input['tid']) ? intval($this->input['tid']) : '';		if (empty($tid)) $this->errorOutput(NOID);		$type = $this->obj->detail_type($tid);		$this->addItem($type);		$this->output();	}		public function index()	{		}		/**	 * 获取条件	 */	private function get_condition()	{		return array(			'key' => trim(urldecode($this->input['k']))		);	}}$out = new libraryTypeApi();$action = $_INPUT['a'];if (!method_exists($out,$action)){	$action = 'show';}$out->$action();?>