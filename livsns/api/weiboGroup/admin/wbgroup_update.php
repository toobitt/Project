<?phprequire('./global.php');define('MOD_UNIQUEID', 'wbgroup');class wbGroupUpdate extends adminReadBase{	public function __construct()	{		parent::__construct();	}		public function __destruct()	{		parent::__destruct();	}		public function sort(){}	public function publish(){}	public function create()	{		if(empty($this->input['name']))		{			$this->errorOutput('类型名称不能为空');		}		if(empty($this->input['wb_akey']))		{			$this->errorOutput('App Key不能为空');					}		if(empty($this->input['wb_skey']))		{			$this->errorOutput('App Secret不能为空');					}				$info = array(			'name' => urldecode($this->input['name']),			'wb_akey'  => urldecode($this->input['wb_akey']),			'wb_skey' => urldecode($this->input['wb_skey']),			'create_time' => TIMENOW,			'update_time' => TIMENOW,			'user_id'   => $this->user['user_id'],			'user_name' => $this->user['user_name'],			'ip'		=> hg_getip(),		);		$sql = "INSERT INTO " . DB_PREFIX . "group SET ";		$space = '';		foreach($info as $k => $v)		{			$sql .= $space . $k . "='" . $v ."'";			$space = ',';		}				$this->db->query($sql);		$id = $this->db->insert_id();		if($id)		{			$this->addItem($id);			$this->output();		}		$this->errorOutput('添加失败');			}			public function update()	{		if(empty($this->input['id']))		{			$this->errorOutput('ID不能为空');			}		if(empty($this->input['name']))		{			$this->errorOutput('类型名称不能为空');		}		if(empty($this->input['wb_akey']))		{			$this->errorOutput('App Key不能为空');					}		if(empty($this->input['wb_skey']))		{			$this->errorOutput('App Secret不能为空');					}				$info = array(			'name' => urldecode($this->input['name']),			'wb_akey'  => urldecode($this->input['wb_akey']),			'wb_skey' => urldecode($this->input['wb_skey']),			'create_time' => TIMENOW,			'update_time' => TIMENOW,			'user_id'   => intval($this->user['user_id']),			'user_name' => trim(urldecode($this->user['user_name'])),			'ip'		=> hg_getip(),		);		$sql = "UPDATE " . DB_PREFIX . "group SET ";		$space = '';		foreach($info as $k => $v)		{			$sql .= $space . $k . "='" . $v ."'";			$space = ',';		}		$sql .=  " where id=" . intval($this->input['id']);		$this->db->query($sql);				$info['id'] = intval($this->input['id']);		$this->addItem($info);		$this->output();	}		public function delete()	{		if(empty($this->input['id']))		{			$this->errorOutput("ID不能为空");		}		$ids = urldecode($this->input['id']);				$sql = "DELETE FROM " . DB_PREFIX . "weibo WHERE id IN(". $ids .")";		$this->db->query($sql);				$this->addItem($ids);		$this->output();	}			public function audit()	{		if(empty($this->input['id']))		{			$this->errorOutput('ID不能为空'); 		}		$id = urldecode($this->input['id']);		$sql = "UPDATE " . DB_PREFIX ."weibo SET status = 1 WHERE id IN(" . $id . ")";		$this->db->query($sql);		$arr = array('status' => 1,'id'=> $id);		$this->addItem($arr);		$this->output();	}			public function back()	{		if(empty($this->input['id']))		{			$this->errorOutput('ID不能为空');		}		$id = urldecode($this->input['id']);		$sql = "UPDATE " . DB_PREFIX ."weibo SET status = 0 WHERE id IN(" . $id . ")";		$this->db->query($sql);		$arr = array('status' => 0, 'id' => $id);		$this->addItem($arr);		$this->output();	}		public function unknow()	{		$this->errorOutput('方法不存在!');	}}$out = new wbGroupUpdate();if(!method_exists($out, $_INPUT['a'])){	$action = 'unknow';}else {	$action = $_INPUT['a'];}$out->$action(); ?>