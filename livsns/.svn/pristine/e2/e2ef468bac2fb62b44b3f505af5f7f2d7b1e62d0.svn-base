/*webview js*/
(function(){var config={api:{getUserInfo:"callUserInfo",getSystemInfo:"callSystemInfo",getLocation:"callLocation",goLogin:"goUncenter"},defaultOp:{getUserInfo:{userInfo:{userid:18,telephone:13770834057,username:"这你都能猜到",userTokenKey:"",m2ouid:"ios.app241178",picurl:"http://img.wifiwx.com/material/members/img/2013/08/8b223b1467b38415d63f58257cac5a76.jpg"}},getSystemInfo:{deviceInfo:{debug:1,types:"x86_64",system:"iPhone OS7.1",device_token:"123",program_name:"zhuihuiwuxi",program_version:"2.4.0",appid:"",appkey:""}},getLocation:{longitude:118.824952,latitude:31.97819}},error:{getUserInfo_error:"不能获取用户信息",getSystemInfo_error:"不能获取设备信息",getLocation_error:"不能获取经纬度"},interval:300};function Plugin(){var _this=this;_bridgeInit=false;_this.response={};_this.cache={};_this.entryPlat="";var utils={callApiCenter:function(api,callback){var mbldevice=_this.getMobileDevice(),param="";if(_this.response[api]){$.isFunction(callback)&&callback(_this.response[api]);return false}if(!$.isFunction(callback)){param=callback}else{_this.cache[api]=callback||""}if(mbldevice=="iOS"){var webviewBridge=window.WebViewJavascriptBridge;if(webviewBridge){if(!_bridgeInit){webviewBridge.init(function(message,responseCallback){});_bridgeInit=true}webviewBridge.callHandler(api,param,function(response){response=typeof response=="string"?JSON.parse(response):response;_this.entryPlat="dingdone";_this.response[api]=response;$.isFunction(callback)&&callback(response)})}else{var iosHref="";if(typeof param=="object"){$.each(param,function(kk,vv){if(kk==="content_url"){vv=encodeURIComponent(vv)}iosHref+="&"+kk+"="+vv});window.location.hash="";window.location.href="#func="+api+"&param="+encodeURI(iosHref)}else if(param){type=param.replace("#","&");window.location.hash="";window.location.hash="#"+type}else{window.location.hash="";window.location.hash="#func="+api}}}else if(mbldevice=="Android"){try{var needParticular=utils.particular(api,param);if(needParticular){return false}var response=param?window.android[api](param):window.android[api]();response=typeof response=="string"?JSON.parse(response):response;_this.entryPlat="dingdone";_this.response[api]=response;$.isFunction(callback)&&callback(response)}catch(e){try{_this.entryPlat="app";window.android[config.api[api]]()}catch(e){_this.entryPlat="other";_this.response[api]="";$.isFunction(callback)&&callback(config.error[api+"_error"])}}}else if(!!config.defaultOp[api]){_this.entryPlat="pc";_this.response[api]=config.defaultOp[api];$.isFunction(callback)&&callback(config.defaultOp[api])}else{console.log("请到移动设备上测试~")}},particular:function(api,param){switch(api){case"makeTel":{window.android.makeTel(param.tel);return true}case"appALiPay":{window.android.appALiPay(param.order_id);return true}case"sharePlatsAction":{window.android.sharePlatsAction(param.content,param.content_url,param.pic);return true}case"goToMap":{window.android.goToMap(param.address,param.lat,param.lng,param.name);return true}case"goOutlink":{window.android.goOutlink(param);return true}default:{return false}}}};_this.getMobileDevice=function(){var mbldevice=navigator.userAgent.toLowerCase();if(/iphone|ipod|ipad/gi.test(mbldevice)){return"iOS"}else if(/android/gi.test(mbldevice)){return"Android"}else{return"Unknow Device"}};_this.callApiCenter=function(api,callback){return utils.callApiCenter(api,callback)}}$.extend(Plugin.prototype,{constructor:Plugin,getClient:function(api,json){this.entryPlat="app";this.response[api]=json;this.cache[api](json)},getPlat:function(callback){var _this=this;if(_this.entryPlat){$.isFunction(callback)&&callback(_this.entryPlat);return false}var timeout=0;var interval=setInterval(function(){timeout+=config.interval;if(_this.entryPlat||timeout>2e3){$.isFunction(callback)&&callback(_this.entryPlat||"other");clearInterval(interval);interval=null}},config.interval)},getUserInfo:function(callback){return this.callApiCenter("getUserInfo",callback)},getSystemInfo:function(callback){return this.callApiCenter("getSystemInfo",callback)},getLocation:function(callback){return this.callApiCenter("getLocation",callback)},goLogin:function(){return this.callApiCenter("goLogin")},goShare:function(param){return this.callApiCenter("sharePlatsAction",param)},goBack:function(){return this.callApiCenter("goBack")},goToMap:function(param){return this.callApiCenter("goToMap",param)},makeTel:function(param){return this.callApiCenter("makeTel",param)},goOutlink:function(param){return this.callApiCenter("goOutlink",param)},appALiPay:function(param){return this.callApiCenter("appALiPay",param)}});window.hgClient=new Plugin;window.getUserInfo=function(json){Plugin.prototype.getClient.call(hgClient,"getUserInfo",json)};window.getSystemInfo=function(json){Plugin.prototype.getClient.call(hgClient,"getSystemInfo",json)};window.getLocation=function(json){Plugin.prototype.getClient.call(hgClient,"getLocation",json)}})();

/*toast js*/
(function(){var pluginName="hg_toast";function Toast(options){this.op=$.extend({content:"接口访问错误",target:"#popToast",appendTo:"body",insertBefore:"",delay:1300,cssInited:false},options);this.cssInit()}$.extend(Toast.prototype,{show:function(msg,callback,delay){var self=this;if(!self.$toast||!self.$toast.length){self.$toast=$(this.append("tip"));if(self.op.insertBefore){self.$toast.insertBefore(self.op.insertBefore)}else if(self.op.appendTo){self.$toast.appendTo(self.op.appendTo)}}self.$toast.find(".inner").html(msg||self.op.content);self.$toast.removeClass("fadeOut").addClass("fadeIn");setTimeout(function(){self.close(callback)},delay||self.op.delay);return self},close:function(callback){var self=this;!!self.$toast&&self.$toast.removeClass("fadeIn").addClass("fadeOut");$.isFunction(callback)&&callback();setTimeout(function(){!!self.$toast&&self.$toast.remove();self.$toast=null},300);return this},confirm:function(msg,callback){var self=this;if(!self.$toast||!self.$toast.length){self.$toast=$(this.append("confirm"));if(self.op.insertBefore){self.$toast.insertBefore(self.op.insertBefore)}else if(self.op.appendTo){self.$toast.appendTo(self.op.appendTo)}}self.$toast.find(".inner").html(msg||self.op.content);self.$toast.removeClass("fadeOut").addClass("fadeIn");self.$toast.find(".btn").click(function(event){var $this=$(event.currentTarget);if($this.hasClass("btn-cancel")){self.close(callback)}else if($this.hasClass("btn-sure")){$.isFunction(callback)&&callback(true);self.close()}});return self},append:function(type){if(type=="tip"){return'<div class="popOverlay fadeOut"><div class="popBox tipBox" id="'+this.op.target.substr(1)+'"><span class="inner"></span></div></div>'}else if(type=="confirm"){return""+'<div class="popOverlay fadeOut">'+'<div class="popBox confirmBox" id="'+this.op.target.substr(1)+'">'+'<div class="inner"></div>'+'<div class="pop-btnArea">'+'<span class="btn btn-cancel">取消</span>'+'<span class="btn btn-sure">确定</span>'+"</div>"+"</div>"+"</div>"+""}},cssInit:function(){if(this.op.cssInited){return}this.op.cssInited=true;$("<style />").attr("style","text/css").appendTo("head").html(".popOverlay{position:fixed; top:0; left:0; display:-webkit-box; width:100%; height:540px; -webkit-box-align:top; -webkit-box-pack:center; }"+".popBox{width:270px; height:104px; margin-top:30%; z-index: 11001; text-align : center; transition:opacity 0.3s; }"+".tipBox .inner{display:inline-block; line-height:24px; margin:0 10px; padding:10px; background-color: rgba(0, 0, 0, 0.8);border-radius:8px; overflow:hidden; color : #fff;}"+".confirmBox{text-align:center; box-shadow:0 3px 9px rgba(0,0,0,.5); background-color:rgba(0, 0, 0, 0.8); border-radius:3px; }"+".confirmBox .inner{line-height:22px; padding:10px; color:#fff; border-radius:3px 3px 0 0; }"+".confirmBox .pop-btnArea{display:-webkit-box; display:-ms-flexbox; height:40px; line-height:40px; border-top:1px solid rgba(88, 88, 88, 0.8); }"+".confirmBox .btn{display:block;-webkit-box-flex:1;-ms-flex:1; border-right:1px solid rgba(88, 88, 88, 0.8); }"+".confirmBox .btn:last-of-type{border-right:none; }"+".fadeOut{opacity:0!important; z-index:-1!important;}"+".fadeIn{opacity:1!important; }")}});$[pluginName]=function(option){return new Toast(option)}})();

/*print js*/
(function($){var styleCss=""+".printViewPop{position:fixed; width:35%; max-width:50%; min-height:30px; font-size:14px; color:#fff; z-index:9999; background-color:rgba(0, 0, 0, 0.7); padding:5px 10px; transition:width 0.3s; -webkit-transition:width 0.3s; }"+".printViewPop .clear{position:absolute; right:5px; top:5px; display:block; width:36px; height:24px; line-height:24px; text-align:center; color:#17b202; font-size:12px; z-index:999; padding:2px; }"+".printViewPop em{color:red; margin-left:5px;  }"+".printClose{width:30px; color:rgba(0, 0, 0, 0.7); font-size:0; }"+".printViewPop p{width:calc(100% - 30px); line-height:22px; padding:5px 0; word-wrap:break-word; position:relative; } "+'.printViewPop p:before{position:absolute; left:0; content:""; width:100%; height:1px; }'+".printViewPop p:before{top:0; background-image:-webkit-linear-gradient(left, #4c4c4c 0, #5e5e5e 50%, #4c4c4c 100%); }"+".printViewPop p:first-of-type:before{background-image:none; }"+"";var utils=function(){var me={};me.addcss=function(){$("<style>"+styleCss+"</style>").appendTo("head")};me.cover=function(options,father){utils.addcss();father=father||"body";if($("#printViewPop").length){$("#printViewPop").remove()}var defaultCss={top:"5px",right:"5px"};if(options&&options.bottom){defaultCss.top="auto"}if(options&&options.left){defaultCss.right="auto"}var popCss=$.extend({},defaultCss,options);var printViewPop=$('<div id="printViewPop" class="printViewPop"><span class="clear">清空</span></div>').appendTo(father).css(popCss);utils.bindevent();return printViewPop};me.bindevent=function(){$("#printViewPop").on("click",function(){$(this).toggleClass("printClose")});$("#printViewPop").on("click",".clear",function(){$("#printViewPop").find("p").remove()})};return me}();window.print=function(utils){var log=function(msg){var printViewPop=$("#printViewPop");if(!printViewPop.length){printViewPop=utils.cover()}if(typeof msg=="object"){if(msg[0]&&msg[0]instanceof HTMLElement){msg=msg[0].className+"<em>类名</em>"}else{msg=JSON.stringify(msg)}}$("<p>"+msg+"</p>").appendTo(printViewPop)};return{log:log}}(utils)})(window.jQuery||window.Zepto);