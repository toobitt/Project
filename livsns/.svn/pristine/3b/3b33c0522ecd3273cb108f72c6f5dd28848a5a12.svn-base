<?php/**************************************************************************** LivSNS 0.1* (C)2004-2010 HOGE Software.* $Id: web.php 17960 2013-03-21 14:28:00 jeffrey $***************************************************************************/require_once './global.php';require_once CUR_CONF_PATH . 'lib/web.class.php';define('MOD_UNIQUEID', 'web'); //模块标识class webApi extends outerReadBase{	private $web;		public function __construct()	{		parent::__construct();		$this->web = new webClass();	}	public function __destruct()	{		parent::__destruct();		unset($this->web);	}				public function show()	{			}		public function count()	{			}		public function detail()	{			}		//单条新闻的详细输出接口	//$id 内容id $content_id $column_id 发布库的id 栏目id	public function show_news_detail()	{		require_once(ROOT_PATH . 'lib/class/publishcontent.class.php');		$this->puscont = new publishcontent();		$this->input['id'] = intval($this->input['id']);		$this->input['content_id'] = intval($this->input['content_id']);		if ($this->input['id'])		{			$data['id'] = intval($this->input['id']);			$data['client_type'] = "2";			$result = $this->puscont->get_content($data);			$id = isset($result[0]['id']) ? $result[0]['id'] : 0;					}		elseif($this->input['content_id'] && $this->input['column_id'])		{			$result = $this->puscont->get_content_by_cid($this->input['content_id'],$this->input['column_id']);			$id = $result[$this->input['content_id']]['id'];		}		else		{			$this->errorOutput("参数缺损");		}		if(!$id)		{			$this->errorOutput("内容不存在");		}		$ret = $this->web->show_news_detail($id);        $ret['ding_pic'] = $this->show_pic(2);        $ret['mood_pic'] = $this->show_pic(4);        $ret['pingfen_pic'] = $this->show_pic(1);		$this->addItem($ret);		$this->output();	}	    public function show_pic($type)    {        if (!$type) {            return false;        }        $settings_info = array();        $settings_info = $this->web->show_pic_setting($type);        return $settings_info;            }		//心情分类输出接口	public function show_pic_setting()	{		$setting_info = array();		$setting_info = $this->web->show_pic_setting("4");		if ($setting_info)		{			foreach ($setting_info as $value)			{				$this->addItem($value);			}		}				$this->output();	}		//顶	public function show_pic_setting_ding()	{		$setting_info = array();		$setting_info = $this->web->show_pic_setting("2");		if ($setting_info)		{			foreach ($setting_info as $value)			{				$this->addItem($value);			}		}				$this->output();	}		//评分	public function show_pic_setting_pingfen()	{		$setting_info = array();		$setting_info = $this->web->show_pic_setting("1");		if ($setting_info)		{			foreach ($setting_info as $value)			{				$this->addItem($value);			}		}				$this->output();	}		//排行配置输出接口	public function show_rank()	{		$rank_info = array();		$rank_info = $this->web->show_rank();		if ($rank_info)		{			foreach ($rank_info as $value)			{				$this->addItem($value);			}		}				$this->output();	}		//排行包含数据输出接口	public function show_rank_list()	{			}		public function uknow()	{		$this->errorOutput("接口调用错误");	}	}$out = new webApi();$action = $_INPUT['a'];if (!method_exists($out, $action)){	$action = 'uknow';}$out->$action();?>