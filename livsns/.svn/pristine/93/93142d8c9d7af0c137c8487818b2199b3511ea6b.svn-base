<?phpclass paydataClass extends InitFrm{	public function __construct()	{		parent::__construct();	}		public function __destruct()	{		parent::__destruct();	}		public function show($offset, $count ,$data)	{		if ($count != -1)		{			$data_limit = ' LIMIT ' . $offset . ' , ' . $count;		}		$sql = 'SELECT * FROM ' . DB_PREFIX . 'paydata  WHERE active = 1';				if($data)		{			$condition = $data;		}		if ($condition) $sql .= $condition;		$sql .= ' ORDER BY create_time desc,id DESC';		if ($data_limit) $sql .= $data_limit;		$query = $this->db->query($sql);		$info = array();		while ($rows = $this->db->fetch_array($query))		{			$info[] = $rows;		}		return $info;	}		public function create($data)	{		$fields = array();		foreach($data as $k=>$v)		{			if (is_string($v))			{				$fields[] = $k . "='" . $v . "'";			}			elseif (is_int($v))			{				$fields[] = $k . '=' . $v;			}		}		$sql = 'INSERT INTO ' . DB_PREFIX . 'paydata SET ' . implode(',', $fields);		$this->db->query($sql);			$data['id'] = $this->db->insert_id();		if ($data['id'])		{			return $data;		}		return false;	}		//当callback文件 生成缓存文件失败时，写入库 给异步文件使用	public function create_back($data)	{		$fields = array();		foreach($data as $k=>$v)		{			if (is_string($v))			{				$fields[] = $k . "='" . $v . "'";			}			elseif (is_int($v))			{				$fields[] = $k . '=' . $v;			}		}		$sql = 'INSERT INTO ' . DB_PREFIX . 'back_config SET ' . implode(',', $fields);		$this->db->query($sql);			$data['id'] = $this->db->insert_id();		if ($data['id'])		{			return $data;		}		return false;	}		//更新基本信息	public function update($data, $id)	{		$fields = array();		foreach($data as $k=>$v)		{			if (is_string($v))			{				$fields[] = $k . "='" . $v . "'";			}			elseif (is_int($v))			{				$fields[] = $k . '=' . $v;			}		}		$sql = 'UPDATE ' . DB_PREFIX . 'paydata SET ' . implode(',', $fields) . ' WHERE 1';		if (is_int($id))		{			$sql .= ' AND id = ' . $id;		}		elseif (is_string($id))		{			$sql .= ' AND id in (' . $id . ')';		}		$this->db->query($sql);		return $data;	}		//信息基本信息读取 $id	public function detail($out_trade_no)	{		$sql = 'SELECT * FROM ' . DB_PREFIX . 'paydata WHERE active = 1 and out_trade_no = ' . $out_trade_no;		$result = array();		$result = $this->db->query_first($sql);		return $result;	}		//异步操作时，当缓存文件 不存在时，查询数据库 得到配置文件	public function detail_back($mytrade_no)	{		$sql = 'SELECT * FROM ' . DB_PREFIX . 'back_config WHERE mytrade_no = ' . $mytrade_no;		$result = array();		$result = $this->db->query_first($sql);		return $result;	}		}?>