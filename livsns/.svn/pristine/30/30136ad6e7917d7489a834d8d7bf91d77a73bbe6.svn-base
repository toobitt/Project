<?php/* * 视频转码操作接口（与前台进行互动） */require_once('global.php');define('MOD_UNIQUEID','transcode_manger');//模块标识require_once(CUR_CONF_PATH . 'lib/transcode.class.php');class  video_transcode extends adminBase{	var $transcode;    public function __construct()	{		parent::__construct();		$arr = array();		if($this->input['host'] && $this->input['port'])		{			$arr = array('host' => $this->input['host'],'port' => $this->input['port']);		}		else if($this->settings['transcode'])		{			$arr = $this->settings['transcode'];		}		else		{			$this->errorOutput(NO_SELECT_TRANSERVER);		}		$this->transcode = new transcode($arr);	}		//返回正在转码的个数	public function get_transcode_tasks()	{		echo $this->transcode->get_transcode_tasks();	}		//暂停视频转码	public function pause_transcode_task()	{		if(!$this->input['id'])		{			$this->errorOutput(NOID);		}		echo $this->transcode->pause_transcode_task($this->input['id']);	}		//恢复视频转码	public function resume_transcode_task()	{		if(!$this->input['id'])		{			$this->errorOutput(NOID);		}		echo $this->transcode->resume_transcode_task($this->input['id']);	}		//停止视频转码	public function stop_transcode_task()	{		if(!$this->input['id'])		{			$this->errorOutput(NOID);		}		echo $this->transcode->stop_transcode_task($this->input['id']);	}		//获取转码状态	public function get_transcode_status()	{		echo $this->transcode->get_transcode_status($this->input['id']);//返回状态	}		public function upload_water_transcode_task()	{		if(!$this->input['url'])		{			$this->errorOutput(NOURL);		}		echo $this->transcode->upload_water_transcode_task($this->input['url']);	}	//重新提交回调	public function redo_callback()	{		echo $this->transcode->redo_callback_task($this->input['id']);//返回状态	}	public function unknow()	{		$this->errorOutput(NOFUC);	}}$out = new video_transcode();if(!method_exists($out, $_INPUT['a'])){	$action = 'unknow';}else {	$action = $_INPUT['a'];}$out->$action(); ?>