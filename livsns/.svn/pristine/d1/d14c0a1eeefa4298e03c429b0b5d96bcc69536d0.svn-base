<?phpheader("Content-type:text/html;charset=utf-8");require_once './global.php';require_once CUR_CONF_PATH . 'lib/messagereceived.class.php';define('MOD_UNIQUEID', 'message_received'); //模块标识class messagereceivedUpdateApi extends adminUpdateBase{	private $messagereceived;		public function __construct()	{		parent::__construct();		$this->messagereceived = new messagereceivedClass();	}	public function __destruct()	{		parent::__destruct();		unset($this->messagereceived);	}		/**	 * 增加短信信息	 */	public function create()	{		if (empty($this->input['send_phone']) || empty($this->input['send_time']) || empty($this->input['receive_phone'])){			$this->errorOutput(OBJECT_NULL);		}		else{			$title=$this->input['title']?$this->input['title']:"";			$content=$this->input['content']?$this->input['content']:"";			$send_name=$this->input['send_name']?$this->input['send_name']:"";			$send_phone=$this->input['send_phone'];			$receive_phone=$this->input['receive_phone'];			$send_time=$this->input['send_time'];			$appid=$this->input['appid'];			$appname=$this->input['appname'];			$user_id=$this->input['user_id'];			$user_name=$this->input['user_name'];			if($this->input['picture']){				$is_picture = 1;				$picture = $this->input['picture'];			}			else {				$is_picture = 0;				$picture = "";			}			if($this->input['video']){				$is_video = 1;				$video = $this->input['video'];			}			else {				$is_video = 0;				$video = "";			}			if($this->input['annex']){				$is_annex = 1;				$annex = $this->input['annex'];			}			else {				$is_annex = 0;				$annex = "";			}			$status = 0;			$active = 1;			$sort = 9999;			$create_time = time();			$update_time = time();			$ip = ($_SERVER["HTTP_VIA"]) ? $_SERVER["HTTP_X_FORWARDED_FOR"] : $_SERVER["REMOTE_ADDR"];			$ip = ($ip) ? $ip : $_SERVER["REMOTE_ADDR"];			if(($is_picture==1) || ($is_video==1) || ($is_annex==1)){				$cateid = 1;			}			else {				$cateid = 0;			}			$date = array();			$date['title'] = $title;			$date['content'] = $content;			$date['send_phone'] = $send_phone;			$date['send_name'] = $send_name;			$date['receive_phone'] = $receive_phone;			$date['send_time'] = intval($send_time);			$date['appid'] = intval($appid);			$date['appname'] = $appname;			$date['user_id'] = intval($user_id);			$date['user_name'] = $user_name;			$date['is_picture'] = $is_picture;			$date['is_video'] = $is_video;			$date['is_annex'] = $is_annex;			$date['status'] = $status;			$date['active'] = $active;			$date['create_time'] = $create_time;			$date['update_time'] = $update_time;			$date['ip'] = $ip;			$date['cateid'] = $cateid;			$date['sort'] = $sort;			$result = $this->messagereceived->create($date);			$this->addItem($result);			$this->output();		}	}		public function audit()	{			}		public function publish()	{			}		public function sort()	{			}	public function update()	{			}	public function delete()	{			}		}$out = new messagereceivedUpdateApi();$out->create();?>