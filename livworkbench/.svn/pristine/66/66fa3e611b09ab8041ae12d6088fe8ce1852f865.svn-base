<!DOCTYPE html>  
<html>  
    <head>  
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>  
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>  
        <meta name="apple-mobile-web-app-capable" content="yes"/>  
        <meta name="apple-mobile-web-app-status-bar-style" content="black"/>  
        <link href="css/video.css" rel="stylesheet">
        <title>video</title> 
    </head>
    <body>
	    <div class="video-box">
	        <div class="video-player">
	        	 <span class="video-name"></span>
	        </div>
	    </div>   
    </body>  
    <script src="jquery-1.8.3.min.js"></script>
    <script src="device.js"></script>
    <script src="jquery.tmpl.min.js"></script>
    <script type="text/x-jquery-tmpl" id="html5-vedio-tpl">
	 <video id="video" src="${video_url}" width="550" height="400" controls="controls" autoplay="true">              
                您的浏览器不支持html5 video标签
     </video>
	</script>
    <script type="text/x-jquery-tmpl" id="vedio-tpl">
	<div class="object" style="width:550px;height:400px;">
  		<object id="vodPlayer" type="application/x-shockwave-flash" data="vodPlayer.swf?11122713" width="550" height="400">
			<param name="movie" value="vodPlayer.swf?11122713">
			<param name="allowscriptaccess" value="always">
			<param name="allowFullScreen" value="true">
			<param name="wmode" value="transparent">
			<param name="flashvars" value="videoUrl=${video_url}&autoPlay=true&aspect=4:1">
  		</object>
	</div>
	</script>
        <script type="text/javascript">
            var urls = {
            		'ios' : 'http://vfile1.dev.hogesoft.com:233/2014/1413/9470/8844/141394708844.ssm/141394708844.mp4', //
                	'android' : {
                		'>2.3' : 'http://vfile1.dev.hogesoft.com:233/2014/1413/9470/8844/141394708844.ssm/141394708844.mp4', //
                		'<=2.3' : 'http://vfile1.dev.hogesoft.com:233/2014/1413/9470/8844/141394708844.ssm/141394708844.mp4' //	
                	},
                	'wp' : 'http://vfile1.dev.hogesoft.com:233/2014/1413/9470/8844/141394708844.ssm/141394708844.mp4', 
                	'flash' : 'http://vfile1.dev.hogesoft.com:233/2014/1413/9470/8844/141394708844.ssm/manifest.m3u8'
            };
            $(function(){
                var platform = window.navigator.userAgent.toLowerCase();
                $('.video-name').html(platform);
            	var doc = function(type){
            		//$('#video').attr('src', urls[type]);
            		var info = { video_url : urls[type] };
    				$( '#html5-vedio-tpl' ).tmpl(info).appendTo('.video-player');
            	};
            	if(device.ios()){
            		doc('ios');
            	} else if(device.android()){
            		if( platform.search('android [23]') !== -1 ){
            			doc('>2.3');
            		} else {
            			doc('<=2.3');
            		}
            	} else if(device.windowsPhone()){
            		doc('wp');
            	} else {
            		var info = { video_url : urls['flash'] };
    				$( '#vedio-tpl' ).tmpl(info).appendTo('.video-player');
    				$('#video').hide();
            	}
            });
        </script>
</html>  