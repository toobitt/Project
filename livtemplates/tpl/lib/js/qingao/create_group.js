$(function() {	var indexValue;	$('#create_group input[type="text"],textarea').focus(function() {		indexValue = this.defaultValue;		if ($(this).val() == indexValue)		{			$(this).val('');		}	}).blur(function() {		if ($(this).val() == '')		{			$(this).val(indexValue);		}	});	/*	function hg_select_tags(input_els, tagObj, visitedClass, limit)	{		var arr = [];		var input_dVal = input_els.defaultValue;		if (input_dVal != input_els.value)		{			arr = input_els.value.split(',');		}		if (arr.length >= limit || tagObj.attr('class') == visitedClass)		{			return false;		}		arr.push(tagObj.text());		input_els.value = arr.join(',');		tagObj.addClass(visitedClass);		$('#group_tag').select(false);	}		$('#group_tags li').click(function() {		var obj = document.getElementById('group_tag');		hg_select_tags(obj, $(this), 'selectTag', 5);	});	*/    (function(){        var list = [], cname = 'selectTag';        $('#group_tags').on('click', 'li', function(){            if($(this).hasClass(cname)){                $(this).removeClass(cname);            }else{                var data = $('#group_tag').data('data');                if(data.length >= 5){                    return;                }                $(this).addClass(cname);            }            $('#group_tag').trigger('_change', $(this).attr('_text'));        }).find('li').each(function(){            var text = $.trim($(this).text());            list.push(text);            $(this).attr('_text', text);        });        $('#group_tag').on({            blur : function(){                var val = $.trim($(this).val());                var tiao = val == $(this).data('_default') ? true : false;                $('#group_tags li').removeClass('selectTag');                var data = [];                if(!tiao){                    data = val.split(/[,，]/);                    data = $.grep(data, function(n){                        n = $.trim(n);                        return !!n;                    });                    if(data.length > 5){                        data.length = 5;                    }                    $.each(data, function(i, n){                        if($.inArray(n, list) != -1){                            $('#group_tags li[_text="'+ n +'"]').addClass(cname);                        }                    });                }                $(this).trigger('_set', [data]);            },            _change : function(event, text){                var data = $(this).data('data');                var index = $.inArray(text, data);                if(index == -1){                    data.push(text);                }else{                    data.splice(index, 1);                }                $(this).trigger('_set', [data]);            },            _set : function(event, data){                $(this).data('data', data).val(data.join(','));                if(!data.length){                    $(this).val($(this).data('_default'));                }            },            init : function(){                $(this).data('_default', $.trim($(this).val()));                $(this).trigger('blur');                $(this).val($(this).data('_default'));            }        }).trigger('init');    })();	$('.upload_img').click(function() {		var _self = $(this);		// 上传方法		$.upload({			// 上传地址			url: 'groups.php', 			// 文件域名字			fileName: 'Filedata', 			// 其他表单数据			params: {a: 'upload'},			// 上传完成后, 返回json, text			dataType: 'json',			// 上传之前回调,return true表示可继续上传			onSend: function() {				return true;			},			// 上传之后回调			onComplate: function(data) {				var img = data.id+'|'+data.host+'|'+data.dir+'|'+data.filepath+'|'+data.filename;				var addr = _self.attr('attr');				$('#'+addr+'_img').attr('src', data.url);				$('#'+addr).val(img);			}		});	});		$('#create_group').submit(function() {		var g_name = $('input[name="group_name"]');		var g_domain = $('input[name="group_domain"]');		var g_desc = $('textarea[name="group_desc"]');		var g_tag = $('input[name="group_tag"]');				if (g_name.val().length > 15 || g_name.val() == g_name.get(0).defaultValue)		{			alert(g_name.get(0).defaultValue);			g_name.focus();			return false;		}		if (!/^[0-9a-z]{6,20}$/gi.test(g_domain.val()) || g_domain.val() == g_domain.get(0).defaultValue)		{			alert(g_domain.get(0).defaultValue);			g_domain.focus();			return false;		}		if (g_desc.val().length > 60 || g_desc.val() == g_desc.get(0).defaultValue)		{			alert(g_desc.get(0).defaultValue);			g_desc.focus();			return false;		}		if (g_tag.val().split(',').length > 5 || g_tag.val() == g_tag.get(0).defaultValue)		{			alert(g_tag.get(0).defaultValue);			g_tag.focus();			return false;		}	});});