{code}extract($formdata);$str = '';function listAll($arr){	global $str, $_INPUT;	if ($arr && is_array($arr))	{		foreach($arr as $v)		{			if (!$_INPUT['id']) {				$str .= '<option value="'.$v['id'].'">'.sep($v['depath']).$v['name'].'</option>';			}else {				if ($_INPUT['pid'] == $v['id'])				{					$str .= '<option value="'.$v['id'].'" selected="selected" disabled="disabled">'.sep($v['depath']).$v['name'].'</option>';				}else {					$str .= '<option value="'.$v['id'].'" disabled="disabled">'.sep($v['depath']).$v['name'].'</option>';				}			}			if ($v['sub']) {				listAll($v['sub']);			}		}	}	return $str;}function sep($num){	$sep_str = '';	for ($i=0;$i<($num-1)*2;$i++)	{		$sep_str .= '&nbsp;&nbsp;';	}	return $sep_str;}{/code}<form method="post" class="columnForm">	<h3>{if $_INPUT['id']}编辑{else}添加{/if}组织</h3>	<table width="100%" border="0" cellspacing="0" cellpadding="0">		<tr>			<td>所属组织</td>			<td>				<select name="fid">					<option value="{$_INPUT['fid']}"{if $_INPUT['id']} disabled="disabled"{/if}{if  $_INPUT['pid'] == $_INPUT['fid']} selected="selected"{/if}>根级组织</option>					{code}					if ($orgInfo) {						echo listAll($orgInfo[0]);					}					{/code}				</select>			</td>		</tr>		<tr>			<td>组织名称</td>			<td>				<input type="text" name="org_name" value="{$name}" size="30" />			</td>		</tr>		<tr>			<td>组织简介</td>			<td>				<textarea name="org_intro" cols="60" rows="4">{$brief}</textarea>			</td>		</tr>		<tr>			<td colspan="2">				<input type="button" value="{if $_INPUT['id']}保存{else}添加{/if}" class="button_6_14" id="saveOrg" />&nbsp;&nbsp;<input type="button" value="取消" class="button_6_14 cancelBtn" />				<input type="hidden" name="cid" value="{$_INPUT['cid']}" />				{if $id}				<input type="hidden" name="id" value="{$id}" />				{/if}			</td>		</tr>	</table></form>